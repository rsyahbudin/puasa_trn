generator client {
  provider = "prisma-client"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "mysql"
}

model Admin {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  createdAt DateTime @default(now())
}

model Category {
  id    Int    @id @default(autoincrement())
  name  String @unique
  menus Menu[]
}

model Menu {
  id          Int           @id @default(autoincrement())
  name        String
  price       Int
  description String?       @db.Text
  image       String?
  categoryId  Int
  category    Category      @relation(fields: [categoryId], references: [id])
  variants    MenuVariant[]
  orderItems  OrderItem[]
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

model MenuVariant {
  id      Int             @id @default(autoincrement())
  name    String
  menuId  Int
  menu    Menu            @relation(fields: [menuId], references: [id], onDelete: Cascade)
  options VariantOption[]
}

model VariantOption {
  id         Int         @id @default(autoincrement())
  name       String
  price      Int         @default(0)
  variantId  Int
  variant    MenuVariant @relation(fields: [variantId], references: [id], onDelete: Cascade)
}

model Booking {
  id           Int         @id @default(autoincrement())
  customerName String
  phone        String
  instagram    String?
  bookingDate  DateTime
  pax          Int
  seating      String
  totalAmount  Int
  dpAmount     Int
  paymentProof String?
  status       String      @default("pending")
  createdAt    DateTime    @default(now())
  orderItems   OrderItem[]
}

model OrderItem {
  id              Int     @id @default(autoincrement())
  bookingId       Int
  booking         Booking @relation(fields: [bookingId], references: [id], onDelete: Cascade)
  menuId          Int
  menu            Menu    @relation(fields: [menuId], references: [id])
  menuName        String
  quantity        Int
  selectedOptions String? @db.Text
  subtotal        Int
}

model SeatingSpot {
  id          Int      @id @default(autoincrement())
  name        String
  description String?  @db.Text
  image       String?
  capacity    String
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
